From b2094e55b159242e44cead74e731a84f637b580d Mon Sep 17 00:00:00 2001
From: Kuaipz <2685697179@qq.com>
Date: Sat, 27 May 2023 23:58:50 +0800
Subject: [PATCH] Ignore-cancelled-fingerprint-events-they-are-expecte

---
 .../biometrics/fingerprint/FingerprintEnrollEnrolling.java     | 3 +++
 .../biometrics/fingerprint/FingerprintEnrollFindSensor.java    | 1 +
 2 files changed, 4 insertions(+)

diff --git a/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollEnrolling.java b/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollEnrolling.java
index 88f01d3..ee116a4 100644
--- a/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollEnrolling.java
+++ b/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollEnrolling.java
@@ -757,6 +757,9 @@ public class FingerprintEnrollEnrolling extends BiometricsEnrollEnrolling {
 
     @Override
     public void onEnrollmentError(int errMsgId, CharSequence errString) {
+        android.util.Log.e("PHH-Enroll", "heyo " + errMsgId + ", " + errString , new Exception());
+        if (errMsgId == 5) return;
+
         onCancelEnrollment(errMsgId);
     }
 
diff --git a/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollFindSensor.java b/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollFindSensor.java
index a346431..a01338d 100644
--- a/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollFindSensor.java
+++ b/src/com/android/settings/biometrics/fingerprint/FingerprintEnrollFindSensor.java
@@ -341,6 +341,7 @@ public class FingerprintEnrollFindSensor extends BiometricEnrollBase implements
 
     @Override
     public void onEnrollmentError(int errMsgId, CharSequence errString) {
+    android.util.Log.e("PHH-Enroll", "heyo " + errMsgId + ", " + errString + ", " + mNextClicked, new Exception());
         if (mNextClicked && errMsgId == FingerprintManager.FINGERPRINT_ERROR_CANCELED) {
             proceedToEnrolling(false /* cancelEnrollment */);
         } else {
-- 
2.40.1

