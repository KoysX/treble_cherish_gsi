From d3ddf6cf273acc5bbfbc16e96cb6d4374eddee97 Mon Sep 17 00:00:00 2001
From: Kuaipz <2685697179@qq.com>
Date: Sat, 27 May 2023 20:43:05 +0800
Subject: [PATCH] fs_mgr-Keep-allowing-encryptable-fstab-flag

---
 fs_mgr/fs_mgr_fstab.cpp | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/fs_mgr/fs_mgr_fstab.cpp b/fs_mgr/fs_mgr_fstab.cpp
index fc200b2..5cfbf0c 100644
--- a/fs_mgr/fs_mgr_fstab.cpp
+++ b/fs_mgr/fs_mgr_fstab.cpp
@@ -310,17 +310,6 @@ bool ParseFsMgrFlags(const std::string& flags, FstabEntry* entry) {
         }
     }
 
-    // FDE is no longer supported, so reject "encryptable" when used without
-    // "vold_managed".  For now skip this check when in recovery mode, since
-    // some recovery fstabs still contain the FDE options since they didn't do
-    // anything in recovery mode anyway (except possibly to cause the
-    // reservation of a crypto footer) and thus never got removed.
-    if (entry->fs_mgr_flags.crypt && !entry->fs_mgr_flags.vold_managed &&
-        access("/system/bin/recovery", F_OK) != 0) {
-        LERROR << "FDE is no longer supported; 'encryptable' can only be used for adoptable "
-                  "storage";
-        return false;
-    }
     return true;
 }
 
-- 
2.40.1

